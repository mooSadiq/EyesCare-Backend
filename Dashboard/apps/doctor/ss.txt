class DoctorSerializer(serializers.ModelSerializer):
    user = UserSerializer()
     # حقل مخصص لحساب عدد جميع الاستشارات المرتبطة بالطبيب
    total_consultations = serializers.SerializerMethodField()

    # حقل مخصص لحساب عدد الاستشارات المكتملة للطبيب
    completed_consultations = serializers.SerializerMethodField()
    class Meta:
        model = Doctor
        fields = "__all__"
     # دالة لحساب عدد جميع الاستشارات
    def get_total_consultations(self, obj):
        return Consultation.objects.filter(doctor=obj).count()

    # دالة لحساب عدد الاستشارات المكتملة
    def get_completed_consultations(self, obj):
        return Consultation.objects.filter(doctor=obj, is_complete=True).count()

